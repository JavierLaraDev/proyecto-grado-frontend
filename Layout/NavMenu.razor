@using Microsoft.AspNetCore.Components.Authorization

<header id="header" class="fixed-top">
    <div class="container d-flex align-items-center justify-content-between">

        <!-- LOGO -->
        <NavLink href="/" class="logo">
            <img src="assets/img/logo.png" alt="Briz" class="img-fluid" />
        </NavLink>

        <!-- NAV -->
        <nav id="navbar" class="@NavBarClass">
            <ul>

                <AuthorizeView Context="auth">

                    <!-- NO AUTORIZADO -->
                    <NotAuthorized>
                        <li>
                            <NavLink href="/" class="nav-link" ActiveClass="active" @onclick="CerrarMenu">
                                Inicio
                            </NavLink>
                        </li>

                        <li>
                            <NavLink href="Acceder" class="nav-link" ActiveClass="active" @onclick="CerrarMenu">
                                Acceder
                            </NavLink>
                        </li>

                        <li>
                            <NavLink href="registro" class="nav-link" ActiveClass="active" @onclick="CerrarMenu">
                                Registrarse
                            </NavLink>
                        </li>
                    </NotAuthorized>

                    <!-- AUTORIZADO -->
                    <Authorized>

                        <li class="welcome">
                            Hola, @auth.User.Identity?.Name
                        </li>

                        @* ================= ADMIN ================= *@
                        @if (auth.User.IsInRole("0"))
                        {
                            <li class="nav-divider"></li>

                            <li>
                                <NavLink href="usuarios" class="nav-link" ActiveClass="active" @onclick="CerrarMenu">
                                    Usuarios
                                </NavLink>
                            </li>

                            <li>
                                <NavLink href="accesorios" class="nav-link" ActiveClass="active" @onclick="CerrarMenu">
                                    Accesorios
                                </NavLink>
                            </li>

                            <li>
                                <NavLink href="pedidos" class="nav-link" ActiveClass="active" @onclick="CerrarMenu">
                                    Pedidos
                                </NavLink>
                            </li>

                            <li>
                                <NavLink href="reportes" class="nav-link" ActiveClass="active" @onclick="CerrarMenu">
                                    Reportes
                                </NavLink>
                            </li>
                        }

                        @* ================= CLIENTE ================= *@
                        @if (auth.User.IsInRole("1"))
                        {
                            <li class="nav-divider"></li>

                            <li>
                                <NavLink href="bicicleta-personalizada"
                                         class="nav-link nav-client nav-cta"
                                         ActiveClass="active"
                                         @onclick="CerrarMenu">
                                    <i class="fas fa-bicycle"></i>
                                    Personalizar
                                </NavLink>
                            </li>

                            <li>
                                <NavLink href="MonitoreoPedidos"
                                         class="nav-link nav-client"
                                         ActiveClass="active"
                                         @onclick="CerrarMenu">
                                    <i class="fas fa-box"></i>
                                    Mis pedidos
                                </NavLink>
                            </li>

                            <li>
                                <NavLink href="miPerfil"
                                         class="nav-link nav-client"
                                         ActiveClass="active"
                                         @onclick="CerrarMenu">
                                    <i class="fas fa-user"></i>
                                    Mi perfil
                                </NavLink>
                            </li>
                        }

                        <li class="nav-divider"></li>

                        <li>
                            <NavLink href="salir" class="getstarted" @onclick="CerrarMenu">
                                Salir
                            </NavLink>
                        </li>

                    </Authorized>

                </AuthorizeView>

            </ul>

            <!-- TOGGLE MOBILE -->
            <i class="@ToggleIconClass mobile-nav-toggle"
               @onclick="ToggleMenu">
            </i>
        </nav>

    </div>
</header>

@code {
    private bool menuAbierto = false;

    private string NavBarClass =>
        menuAbierto ? "navbar navbar-mobile" : "navbar";

    private string ToggleIconClass =>
        menuAbierto ? "bi bi-x" : "bi bi-list";

    private void ToggleMenu()
    {
        menuAbierto = !menuAbierto;
    }

    private void CerrarMenu()
    {
        menuAbierto = false;
    }
}
