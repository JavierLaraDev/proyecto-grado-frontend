@inject IJSRuntime JS

<div class="charts-grid">

    <!-- Gráfico de Ganancias -->
    <div class="chart-card">
        <h3>Ganancias</h3>
        <canvas id="gananciasChart"></canvas>
    </div>

    <!-- Gráfico de Estados -->
    <div class="chart-card">
        <h3>Estado de Pedidos</h3>
        <canvas id="estadoPedidosChart"></canvas>
    </div>

</div>

@code {
    [Parameter] public int PedidosPendientes { get; set; }
    [Parameter] public int PedidosProceso { get; set; }
    [Parameter] public int PedidosEnviados { get; set; }
    [Parameter] public int PedidosEntregados { get; set; }
    [Parameter] public int PedidosCancelados { get; set; }

    // 🔹 Datos simulados (luego los conecta a datos reales)
    private string[] meses =
        { "Ene", "Feb", "Mar", "Abr", "May", "Jun" };

    private double[] ganancias =
        { 1200, 1800, 1500, 2200, 2600, 3100 };

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            // Donut estados
            await JS.InvokeVoidAsync(
                "crearEstadoPedidos",
                PedidosPendientes,
                PedidosProceso,
                PedidosEnviados,
                PedidosEntregados,
                PedidosCancelados
            );

            // Línea ganancias
            await JS.InvokeVoidAsync(
                "crearGananciasChart",
                meses,
                ganancias
            );
        }
    }
}
