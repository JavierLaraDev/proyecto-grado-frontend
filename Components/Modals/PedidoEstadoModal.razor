@using PersonalizacionProyectoGradoWASM.Modelos
@if (Pedido != null)
{
    <div class="modal-backdrop-pedido">
        <div class="modal-card-pedido small-pedido">

            <div class="modal-header-pedido">
                <h3>Cambiar Estado</h3>
                <button class="modal-close-pedido" @onclick="OnCancelar">✖</button>
            </div>

            <div class="modal-body-pedido">
                <p><strong>Pedido #@Pedido.Id</strong></p>

                <select class="users-select-pedido"
                        @bind="EstadoSeleccionado">
                    @foreach (var estado in Enum.GetValues(typeof(EstadoPedido)))
                    {
                        <option value="@estado">@estado</option>
                    }
                </select>

                <div class="modal-actions-pedido">
                    <button class="users-btn-primary"
                            @onclick="Confirmar">
                        Guardar
                    </button>

                    <button class="users-btn-cancel"
                            @onclick="OnCancelar">
                        Cancelar
                    </button>
                </div>
            </div>

        </div>
    </div>
}


@code {
    [Parameter] public PedidosComprasDto Pedido { get; set; }
    [Parameter] public EventCallback<EstadoPedido> OnConfirmar { get; set; }
    [Parameter] public EventCallback OnCancelar { get; set; }

    private EstadoPedido EstadoSeleccionado;

    protected override void OnParametersSet()
    {
        if (Pedido != null)
            EstadoSeleccionado = Pedido.Estado;
    }

    private async Task Confirmar()
    {
        await OnConfirmar.InvokeAsync(EstadoSeleccionado);
    }
}

